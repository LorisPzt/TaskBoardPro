<section class="tasks-page">
  <header class="tasks-header">
    <h2>Liste des tâches</h2>
    <div class="actions">
      <input #titleInput type="text" class="task-input" placeholder="Titre de la tâche" (keyup.enter)="addTask(titleInput.value); titleInput.value='';" />
      <button class="btn btn-primary" (click)="addTask(titleInput.value); titleInput.value='';">Ajouter</button>
    </div>
  </header>

  <div #highlightContainer></div>

  @if (tasks$ | async; as tasks) {
    <div class="tasks-grid">
      @for (t of tasks; track t.id) {
        <article class="task-card">
          <div class="task-body">
            <h3 class="task-title">{{ t.title }}</h3>
          </div>
          <div class="task-footer">
            <button class="btn btn-highlight" (click)="highlightTask(t.id, t.title)">⭐ Mettre en avant</button>
            <button class="btn btn-danger" (click)="removeTask(t.id)">Supprimer</button>
          </div>
        </article>
      }
    </div>

    @if (tasks.length === 0) {
      <p class="empty">Aucune tâche pour le moment. Ajoute-en une !</p>
    }

  } @else {
    <p>Chargement des tâches ...</p>
  }
</section>
